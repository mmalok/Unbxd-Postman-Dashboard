{%extends "box/simple_login.html"%}
{% macro display_add_fields(fields) -%}
{%if caller%}
                        {{caller()}}
  {%endif%}
  <script>
  function show()
  {
    if(document.getElementById("hide").style.display==="block")
       {
            document.getElementById("hide").style.display = "none";
       }
       else
       {
        document.getElementById("hide").style.display = "block";
       }
  }
  </script>
  <div class="row">
<div class="col-md-6">
<div class="box box-solid box-primary ">
    <div class="box-header with-border">
          <h3 class="box-title">ADD</h3>
          <div class="box-tools pull-right">
            <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
          </div><!-- /.box-tools -->
        </div><!-- /.box-header -->
        <div class="box-body" style="display: block;">
          <select name="field_command" class="form-control"  id="field_command">
                            <option value="insert" name="insert">select field name</option>
                            {%for val in fields%}
                            <option value={{val}} name={{val}}>{{val}}</option>
                            {%endfor%}
                        </select>
                        <select name="condition" class="form-control" id="condition" style="display:none;">
                            <option value="false" name="false">FALSE</option>
                            <option value="true" name="true">TRUE</option>
                        </select>
                        <br/>
                        <br/>
                        <form class="form-group">
                            <input type='text' id="test_field" class="form-control" placeholder="Display the added values"/>
                            <button type="button" class="btn btn-primary btn-flat" onclick="add_suggestions()">Add</button>
                            <button type="button" class="btn btn-primary btn-flat pull-right" onclick="save_suggestion()">Save</button>
                            
                        </form>
        </div><!-- /.box-body -->
      </div>
      </div> 
</div>              
<script>
Metric=($( "#cur_param" ).text());
if(Metric.indexOf("Popular")>-1)
{
    document.getElementById("condition").style.display="block"
}

function add_suggestions()
{
    alert("1")
    Field=document.getElementById("field_command").value;
    Display_Added=document.getElementById("test_field")
    Metric=($( "#cur_param" ).text());
    //alert(Metric)
    if(Metric.indexOf("Field")>-1)
    {
        Display_Added.value=Field;
    }
    else if(Metric.indexOf("Popular")>-1)
    {

    }
    else
    {
        Display_Added.value=Display_Added.value+"*"+Field;
    }
}
function save_suggestion()
{
    localStorage.setItem("commit", "commit");
    company=document.getElementById("command").value
    Display_Added=document.getElementById("test_field").value
    Metric=$( "#cur_param" ).text();
    //alert(Metric)
    if(Metric.indexOf("Field")>-1)
    {
        window.location=window.location.origin+"/add_in_field"+"?company="+company+"&fields="+Display_Added
    }
    else if(Metric.indexOf("Popular")>-1)
    {
        condition=document.getElementById("condition").value
        field=document.getElementById("field_command").value
        window.location=window.location.origin+"/add_popular"+"?company="+company+"&fields="+field+"&condition="+condition
    }
    else
    {
        window.location=window.location.origin+"/add_suggestion_data"+"?company="+company+"&data="+Display_Added
    }
    
}
</script>
{%- endmacro %}
{% block add %}
{% call display_add_fields(fields) %}
{% endcall %}
{%endblock%}
